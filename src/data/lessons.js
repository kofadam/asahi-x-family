// Japanese language learning lessons - focused on katakana reading and basic speaking
import { katakanaData, katakanaWords, generatePracticeSet } from './katakana'

export const lessons = [
  {
    id: 'lesson-001',
    title: 'Katakana Vowels („Ç¢„Éª„Ç§„Éª„Ç¶„Éª„Ç®„Éª„Ç™)',
    difficulty: 'Beginner',
    duration: '2-3 minutes',
    focus: 'Reading katakana vowel characters',
    unlocked: true,
    description: 'Learn to read the 5 basic katakana vowels - your first step toward reading anime titles!',
    learningObjectives: [
      'Recognize and read all 5 katakana vowels',
      'Understand the pronunciation of each vowel',
      'Practice reading vowels quickly'
    ],
    steps: [
      {
        type: 'explanation',
        title: 'Meet the Katakana Vowels',
        content: 'Katakana vowels are the building blocks of Japanese pronunciation. These 5 characters appear in every anime title and character name you\'ve seen!',
        characters: katakanaData.vowels,
        animeExamples: [
          { title: '„Ç¢„Éã„É°', romaji: 'anime', english: 'Anime', vowels: ['„Ç¢', '„Ç§', '„Ç®'], description: 'The word that started it all!' },
          { title: '„Ç®„É¥„Ç°„É≥„Ç≤„É™„Ç™„É≥', romaji: 'evangerion', english: 'Evangelion', vowels: ['„Ç®', '„Ç¢', '„Ç®', '„Ç§', '„Ç™'], description: 'Classic mecha series' },
          { title: '„Ç¢„Çø„ÉÉ„ÇØ„Éª„Ç™„É≥„Éª„Çø„Ç§„Çø„É≥', romaji: 'attack on titan', english: 'Attack on Titan', vowels: ['„Ç¢', '„Ç¢', '„Ç™', '„Ç¢', '„Ç§', '„Ç¢'], description: 'Popular action anime' },
          { title: '„Ç™„Éç„Éî„Éº„Çπ', romaji: 'one piece', english: 'One Piece', vowels: ['„Ç™', '„Ç®', '„Ç§', '„Ç¶'], description: 'Epic pirate adventure' }
        ],
        tip: 'üéå Fun fact: The „Ç¢ in "„Ç¢„Éã„É°" (anime) is the same „Ç¢ you\'re learning now!'
      },
      {
        type: 'recognition',
        title: 'Character Recognition',
        instructions: 'Click the correct romaji reading for each katakana character.',
        characters: katakanaData.vowels.slice(0, 3), // Start with first 3
        practiceType: 'multiple_choice'
      },
      {
        type: 'recognition',
        title: 'All Five Vowels',
        instructions: 'Now try all five vowel characters!',
        characters: katakanaData.vowels,
        practiceType: 'multiple_choice'
      },
      {
        type: 'speed_drill',
        title: 'Speed Reading',
        instructions: 'Read these vowels as quickly as you can!',
        characters: generatePracticeSet(['vowels'], 8),
        timeLimit: 30
      }
    ]
  },

  {
    id: 'lesson-002',
    title: 'Katakana K-Sounds („Ç´„Éª„Ç≠„Éª„ÇØ„Éª„Ç±„Éª„Ç≥)',
    difficulty: 'Beginner',
    duration: '3-4 minutes',
    focus: 'Reading katakana K-series characters',
    unlocked: true,
    description: 'Learn the K-series katakana characters and combine them with vowels.',
    learningObjectives: [
      'Read all K-series katakana characters',
      'Distinguish between similar-looking characters',
      'Practice reading K-sounds with vowels'
    ],
    steps: [
      {
        type: 'explanation',
        title: 'Understanding Japanese Character Series',
        content: 'Japanese uses syllable-based characters, not individual letters like English! Each character represents a full syllable (consonant + vowel). The K-series follows the pattern: K + vowel sound.',
        characters: katakanaData.kSounds,
        linguisticContext: {
          title: 'Why Character Series Exist',
          explanation: 'Japanese is structured around syllables called "mora." Unlike English where "K" is just a consonant sound, Japanese combines consonants with vowels to form complete syllables.',
          examples: [
            { series: 'K-series', pattern: 'K + vowel', examples: ['„Ç´ (ka)', '„Ç≠ (ki)', '„ÇØ (ku)', '„Ç± (ke)', '„Ç≥ (ko)'] },
            { series: 'S-series', pattern: 'S + vowel', examples: ['„Çµ (sa)', '„Ç∑ (shi)', '„Çπ (su)', '„Çª (se)', '„ÇΩ (so)'] },
            { series: 'T-series', pattern: 'T + vowel', examples: ['„Çø (ta)', '„ÉÅ (chi)', '„ÉÑ (tsu)', '„ÉÜ (te)', '„Éà (to)'] }
          ],
          funFact: 'This is why you can\'t have a standalone "K" sound in Japanese - it must be paired with a vowel!'
        },
        tip: 'Think of each character as a complete "building block" of sound, not individual letters!'
      },
      {
        type: 'recognition',
        title: 'K-Series Recognition',
        instructions: 'Match each katakana character to its romaji reading.',
        characters: katakanaData.kSounds,
        practiceType: 'multiple_choice'
      },
      {
        type: 'mixed_practice',
        title: 'Vowels + K-Sounds',
        instructions: 'Mixed practice with vowels and K-sounds.',
        characters: [...katakanaData.vowels, ...katakanaData.kSounds],
        practiceType: 'typing'
      }
    ]
  },

  {
    id: 'lesson-003',
    title: 'Anime Words: „Ç¢„Éã„É°, „Éû„É≥„Ç¨, „Éí„Éº„É≠„Éº',
    difficulty: 'Beginner',
    duration: '3-5 minutes',
    focus: 'Reading anime-related katakana words',
    unlocked: false,
    description: 'Read your first anime-related Japanese words - including „Ç¢„Éã„É° itself!',
    learningObjectives: [
      'Read complete katakana words',
      'Recognize loan words from English',
      'Practice word-level reading fluency'
    ],
    steps: [
      {
        type: 'explanation',
        title: 'Your First Anime Words',
        content: 'Time to read the words that matter most to anime fans! These are the katakana words you\'ll see everywhere in Japan.',
        words: katakanaWords.beginner.slice(0, 4),
        tip: 'üéØ Pro tip: You\'ll see these words on signs in Akihabara and anime shops!'
      },
      {
        type: 'word_reading',
        title: 'Word Recognition',
        instructions: 'Read these katakana words and match them to their English meaning.',
        words: katakanaWords.beginner.slice(0, 4),
        practiceType: 'matching'
      },
      {
        type: 'word_building',
        title: 'Build the Word',
        instructions: 'Type the romaji for each katakana word.',
        words: katakanaWords.beginner.slice(0, 4),
        practiceType: 'typing'
      }
    ]
  },

  {
    id: 'lesson-004',
    title: 'Katakana S-Sounds („Çµ„Éª„Ç∑„Éª„Çπ„Éª„Çª„Éª„ÇΩ)',
    difficulty: 'Beginner',
    duration: '3-4 minutes',
    focus: 'Reading katakana S-series characters',
    unlocked: false,
    description: 'Learn the S-series katakana, including the tricky „Ç∑ (shi).',
    learningObjectives: [
      'Read all S-series katakana characters',
      'Master the „Ç∑ (shi) character',
      'Practice S-sounds in combination'
    ],
    steps: [
      {
        type: 'explanation',
        title: 'The S-Series Characters',
        content: 'The S-series includes one irregular sound: „Ç∑ is "shi" not "si".',
        characters: katakanaData.sSounds,
        tip: '„Ç∑ (shi) looks like a sideways smile - it\'s happy to be different!'
      },
      {
        type: 'recognition',
        title: 'S-Series Practice',
        instructions: 'Practice reading the S-series characters.',
        characters: katakanaData.sSounds,
        practiceType: 'multiple_choice'
      },
      {
        type: 'mixed_practice',
        title: 'Review: Vowels + K + S',
        instructions: 'Mixed practice with all characters learned so far.',
        characters: [...katakanaData.vowels, ...katakanaData.kSounds, ...katakanaData.sSounds],
        practiceType: 'speed_drill',
        timeLimit: 45
      }
    ]
  },

  {
    id: 'lesson-005',
    title: 'Anime Character Greetings',
    difficulty: 'Beginner',
    duration: '4-5 minutes',
    focus: 'Speaking like your favorite anime characters',
    unlocked: false,
    description: 'Learn the greetings you\'ve heard countless times in anime - now you can say them properly!',
    learningObjectives: [
      'Pronounce basic Japanese greetings correctly',
      'Understand when to use each greeting',
      'Practice natural rhythm and intonation'
    ],
    steps: [
      {
        type: 'pronunciation',
        title: 'Greetings from Your Favorite Anime',
        content: 'These are the greetings you\'ve heard in every anime! Now learn to say them like a native.',
        phrases: [
          {
            japanese: '„Åä„ÅØ„Çà„ÅÜ',
            romaji: 'ohayou',
            english: 'Good morning (casual)',
            pronunciation: 'oh-HAH-yoh',
            usage: 'Like when anime classmates greet each other üéí',
            animeExample: 'Heard in slice-of-life anime between friends'
          },
          {
            japanese: '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô',
            romaji: 'ohayou gozaimasu',
            english: 'Good morning (polite)',
            pronunciation: 'oh-HAH-yoh goh-ZAH-ee-mahs',
            usage: 'Like when students greet their sensei üéì',
            animeExample: 'Every school anime when students bow to teachers'
          },
          {
            japanese: '„Åì„Çì„Å´„Å°„ÅØ',
            romaji: 'konnichiwa',
            english: 'Hello/Good afternoon',
            pronunciation: 'kohn-NEE-chee-wah',
            usage: 'The universal anime greeting! üëã',
            animeExample: 'Used by every protagonist meeting new characters'
          },
          {
            japanese: '„ÅÇ„Çä„Åå„Å®„ÅÜ',
            romaji: 'arigatou',
            english: 'Thank you (casual)',
            pronunciation: 'ah-ree-GAH-toh',
            usage: 'Express gratitude like your favorite character üíù',
            animeExample: 'Said with heartfelt emotion in dramatic moments'
          }
        ]
      },
      {
        type: 'pronunciation_practice',
        title: 'Pronunciation Practice',
        instructions: 'Listen and repeat each greeting. Focus on the rhythm!',
        phrases: [
          { japanese: '„Åä„ÅØ„Çà„ÅÜ', romaji: 'ohayou', english: 'Good morning (casual)' },
          { japanese: '„Åì„Çì„Å´„Å°„ÅØ', romaji: 'konnichiwa', english: 'Hello' },
          { japanese: '„ÅÇ„Çä„Åå„Å®„ÅÜ', romaji: 'arigatou', english: 'Thank you' }
        ],
        practiceType: 'repeat_after'
      },
      {
        type: 'usage_practice',
        title: 'When to Use Each Greeting',
        instructions: 'Choose the appropriate greeting for each situation.',
        scenarios: [
          {
            situation: 'Meeting your teacher at 9 AM',
            options: ['„Åä„ÅØ„Çà„ÅÜ', '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô', '„Åì„Çì„Å´„Å°„ÅØ'],
            correct: '„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô',
            explanation: 'Formal morning greeting for your teacher'
          },
          {
            situation: 'Greeting a friend at 2 PM',
            options: ['„Åä„ÅØ„Çà„ÅÜ', '„Åì„Çì„Å´„Å°„ÅØ', '„ÅÇ„Çä„Åå„Å®„ÅÜ'],
            correct: '„Åì„Çì„Å´„Å°„ÅØ',
            explanation: 'Afternoon greeting, appropriate for friends'
          }
        ]
      }
    ]
  },

  {
    id: 'lesson-006',
    title: 'Katakana T-Sounds („Çø„Éª„ÉÅ„Éª„ÉÑ„Éª„ÉÜ„Éª„Éà)',
    difficulty: 'Beginner',
    duration: '3-4 minutes',
    focus: 'Reading katakana T-series characters',
    unlocked: false,
    description: 'Learn the T-series including the unique sounds „ÉÅ (chi) and „ÉÑ (tsu).',
    learningObjectives: [
      'Read all T-series katakana characters',
      'Distinguish between „ÉÅ (chi) and „ÉÑ (tsu)',
      'Practice T-sounds in words'
    ],
    steps: [
      {
        type: 'explanation',
        title: 'The T-Series Characters',
        content: 'The T-series has two special sounds: „ÉÅ (chi) and „ÉÑ (tsu).',
        characters: katakanaData.tSounds,
        tip: '„ÉÅ and „ÉÑ look similar! „ÉÅ has horizontal strokes, „ÉÑ has diagonal ones.'
      },
      {
        type: 'recognition',
        title: 'T-Series Recognition',
        instructions: 'Practice reading T-series characters, especially „ÉÅ and „ÉÑ!',
        characters: katakanaData.tSounds,
        practiceType: 'multiple_choice'
      },
      {
        type: 'word_reading',
        title: 'T-Sound Words',
        instructions: 'Read katakana words containing T-sounds.',
        words: [
          { katakana: '„ÉÜ„É¨„Éì', romaji: 'terebi', english: 'TV' },
          { katakana: '„Çø„ÇØ„Ç∑„Éº', romaji: 'takushii', english: 'taxi' },
          { katakana: '„ÉÅ„Éº„Ç∫', romaji: 'chiizu', english: 'cheese' }
        ],
        practiceType: 'matching'
      }
    ]
  }
]

// Helper functions
export const getAvailableLessons = () => {
  return lessons.filter(lesson => lesson.unlocked)
}

export const getLessonById = (id) => {
  return lessons.find(lesson => lesson.id === id)
}

export const getNextLesson = (currentLessonId) => {
  const currentIndex = lessons.findIndex(lesson => lesson.id === currentLessonId)
  if (currentIndex >= 0 && currentIndex < lessons.length - 1) {
    return lessons[currentIndex + 1]
  }
  return null
}

export const getLessonProgress = (userProgress) => {
  return lessons.map(lesson => ({
    ...lesson,
    completed: userProgress?.lessons?.[lesson.id]?.completed || false,
    accuracyScore: userProgress?.lessons?.[lesson.id]?.accuracyScore || 0,
    lastCompleted: userProgress?.lessons?.[lesson.id]?.lastCompleted || null
  }))
}